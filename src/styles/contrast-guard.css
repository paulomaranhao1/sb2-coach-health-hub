
@layer utilities {
  /* Modern Contrast Protection System */
  
  /* High Contrast Text Utilities */
  .force-readable {
    color: rgb(15 23 42) !important;
    font-weight: 600 !important;
    text-shadow: none !important;
  }

  .dark .force-readable {
    color: rgb(248 250 252) !important;
    font-weight: 600 !important;
  }

  /* Safe Contrast Classes */
  .contrast-safe {
    background-color: rgb(255 255 255) !important;
    color: rgb(15 23 42) !important;
    border: 1px solid rgb(226 232 240) !important;
    font-weight: 600 !important;
  }

  .dark .contrast-safe {
    background-color: rgb(15 23 42) !important;
    color: rgb(248 250 252) !important;
    border: 1px solid rgb(51 65 85) !important;
    font-weight: 600 !important;
  }

  /* Button Contrast Guards - Updated Colors */
  .btn-contrast-safe {
    background-color: rgb(37 99 235) !important;
    color: rgb(255 255 255) !important;
    border: none !important;
    font-weight: 600 !important;
  }

  .btn-contrast-safe:hover {
    background-color: rgb(29 78 216) !important;
    color: rgb(255 255 255) !important;
  }

  .dark .btn-contrast-safe {
    background-color: rgb(59 130 246) !important;
    color: rgb(15 23 42) !important;
  }

  .dark .btn-contrast-safe:hover {
    background-color: rgb(96 165 250) !important;
    color: rgb(15 23 42) !important;
  }
}

/* Emergency Contrast Fixes for New Button Colors */
@supports (color: white) {
  /* Prevent invisible text */
  button:not([class*="bg-blue"]):not([class*="bg-emerald"]):not([class*="bg-violet"]):not([class*="bg-orange"]):not([class*="bg-cyan"]):not([class*="bg-red"]) {
    color: rgb(15 23 42) !important;
    font-weight: 600 !important;
  }
  
  .dark button:not([class*="bg-blue"]):not([class*="bg-emerald"]):not([class*="bg-violet"]):not([class*="bg-orange"]):not([class*="bg-cyan"]):not([class*="bg-red"]) {
    color: rgb(248 250 252) !important;
  }
}

/* Specific Button Color Guards - Updated */
button[class*="bg-violet"],
.magic-link-button,
.purple-button {
  color: rgb(255 255 255) !important;
  background-color: rgb(124 58 237) !important;
  font-weight: 600 !important;
}

button[class*="bg-blue"],
.primary-button {
  color: rgb(255 255 255) !important;
  background-color: rgb(37 99 235) !important;
  font-weight: 600 !important;
}

button[class*="bg-emerald"],
.success-button {
  color: rgb(255 255 255) !important;
  background-color: rgb(5 150 105) !important;
  font-weight: 600 !important;
}

button[class*="bg-cyan"],
.info-button {
  color: rgb(255 255 255) !important;
  background-color: rgb(8 145 178) !important;
  font-weight: 600 !important;
}

button[class*="bg-orange"],
.warning-button {
  color: rgb(255 255 255) !important;
  background-color: rgb(234 88 12) !important;
  font-weight: 600 !important;
}

button[class*="bg-red"],
.danger-button {
  color: rgb(255 255 255) !important;
  background-color: rgb(220 38 38) !important;
  font-weight: 600 !important;
}

/* Disabled state contrast */
button:disabled,
button[disabled] {
  opacity: 0.6 !important;
  cursor: not-allowed !important;
}

button:disabled:not([class*="variant-link"]) {
  font-weight: 600 !important;
}
