
@layer utilities {
  /* Modern Contrast Protection System - No Yellow */
  
  /* High Contrast Text Utilities */
  .force-readable {
    color: rgb(15 23 42) !important;
    font-weight: 600 !important;
    text-shadow: none !important;
  }

  .dark .force-readable {
    color: rgb(248 250 252) !important;
    font-weight: 600 !important;
  }

  /* Safe Contrast Classes */
  .contrast-safe {
    background-color: rgb(255 255 255) !important;
    color: rgb(15 23 42) !important;
    border: 1px solid rgb(226 232 240) !important;
    font-weight: 600 !important;
  }

  .dark .contrast-safe {
    background-color: rgb(15 23 42) !important;
    color: rgb(248 250 252) !important;
    border: 1px solid rgb(51 65 85) !important;
    font-weight: 600 !important;
  }

  /* Button Contrast Guards - Modern Colors */
  .btn-contrast-safe {
    background-color: rgb(37 99 235) !important;
    color: rgb(255 255 255) !important;
    border: none !important;
    font-weight: 600 !important;
  }

  .btn-contrast-safe:hover {
    background-color: rgb(29 78 216) !important;
    color: rgb(255 255 255) !important;
  }

  .dark .btn-contrast-safe {
    background-color: rgb(59 130 246) !important;
    color: rgb(15 23 42) !important;
  }

  .dark .btn-contrast-safe:hover {
    background-color: rgb(96 165 250) !important;
    color: rgb(15 23 42) !important;
  }
}

/* Emergency Contrast Fixes for Button Colors */
@supports (color: white) {
  /* Ensure button text is always readable */
  button {
    font-weight: 600 !important;
  }
  
  /* Primary buttons - white text on colored backgrounds */
  button[class*="bg-blue"],
  button[class*="bg-emerald"],
  button[class*="bg-green"],
  button[class*="bg-violet"],
  button[class*="bg-purple"],
  button[class*="bg-orange"],
  button[class*="bg-cyan"],
  button[class*="bg-red"],
  .primary-button,
  .success-button,
  .warning-button,
  .info-button,
  .magic-link-button,
  .purple-button,
  .btn-primary,
  .btn-success,
  .btn-warning,
  .btn-info,
  .btn-danger,
  .btn-destructive {
    color: rgb(255 255 255) !important;
  }
  
  /* Secondary/outline buttons - dark text on light backgrounds */
  button[class*="bg-gray"],
  button[class*="bg-white"],
  button[class*="variant-outline"],
  button[class*="variant-ghost"],
  .secondary-button,
  .google-auth-button,
  .btn-secondary,
  .btn-outline,
  .btn-ghost {
    color: rgb(30 41 59) !important;
  }
  
  .dark button[class*="bg-gray"],
  .dark button[class*="bg-white"],
  .dark button[class*="variant-outline"],
  .dark button[class*="variant-ghost"],
  .dark .secondary-button,
  .dark .google-auth-button,
  .dark .btn-secondary,
  .dark .btn-outline,
  .dark .btn-ghost {
    color: rgb(241 245 249) !important;
  }
}

/* Specific Button Color Guards with Text */
button[class*="bg-violet"],
button[class*="bg-purple"],
.magic-link-button,
.purple-button {
  color: rgb(255 255 255) !important;
  background-color: rgb(124 58 237) !important;
  font-weight: 600 !important;
}

button[class*="bg-blue"],
.primary-button,
.btn-primary {
  color: rgb(255 255 255) !important;
  background-color: rgb(37 99 235) !important;
  font-weight: 600 !important;
}

button[class*="bg-emerald"],
button[class*="bg-green"],
.success-button {
  color: rgb(255 255 255) !important;
  background-color: rgb(5 150 105) !important;
  font-weight: 600 !important;
}

button[class*="bg-cyan"],
.info-button {
  color: rgb(255 255 255) !important;
  background-color: rgb(8 145 178) !important;
  font-weight: 600 !important;
}

button[class*="bg-orange"],
.warning-button {
  color: rgb(255 255 255) !important;
  background-color: rgb(234 88 12) !important;
  font-weight: 600 !important;
}

button[class*="bg-red"],
.danger-button,
.btn-destructive {
  color: rgb(255 255 255) !important;
  background-color: rgb(220 38 38) !important;
  font-weight: 600 !important;
}

/* Disabled state contrast */
button:disabled,
button[disabled] {
  opacity: 0.6 !important;
  cursor: not-allowed !important;
  font-weight: 600 !important;
}

/* Menu item contrast */
.menu-item, .nav-link {
  color: rgb(71 85 105) !important;
  font-weight: 500 !important;
}

.dark .menu-item, .dark .nav-link {
  color: rgb(148 163 184) !important;
}

.menu-item.active, .nav-link.active {
  color: rgb(255 255 255) !important;
  background-color: rgb(37 99 235) !important;
}
