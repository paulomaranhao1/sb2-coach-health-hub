

/* GUARDA DE CONTRASTE - Previne texto ilegível definitivamente */
@layer utilities {
  /* Classe utilitária para forçar contraste adequado */
  .force-readable {
    color: rgb(31 41 55) !important;
    font-weight: 700 !important;
  }

  .dark .force-readable {
    color: rgb(248 250 252) !important;
    font-weight: 700 !important;
  }

  /* Interceptador universal para botões problemáticos */
  .contrast-safe {
    background-color: rgb(255 255 255) !important;
    color: rgb(31 41 55) !important;
    border: 1px solid rgb(209 213 219) !important;
    font-weight: 700 !important;
  }

  .dark .contrast-safe {
    background-color: rgb(31 41 55) !important;
    color: rgb(248 250 252) !important;
    border: 1px solid rgb(75 85 99) !important;
    font-weight: 700 !important;
  }

  /* Interceptador para elementos com fundo branco */
  .white-bg-safe * {
    color: rgb(31 41 55) !important;
    font-weight: 700 !important;
  }

  .dark .white-bg-safe * {
    color: rgb(248 250 252) !important;
    font-weight: 700 !important;
  }
}

/* REGRAS ESPECÍFICAS PARA PREVENIR PROBLEMAS CONHECIDOS */

/* Interceptar qualquer botão que possa ter texto branco em fundo branco */
@supports (color: white) {
  button:not([class*="bg-red"]):not([class*="bg-blue"]):not([class*="bg-green"]):not([class*="bg-purple"]) {
    color: rgb(31 41 55) !important;
    font-weight: 700 !important;
  }
  
  .dark button:not([class*="bg-red"]):not([class*="bg-blue"]):not([class*="bg-green"]):not([class*="bg-purple"]) {
    color: rgb(248 250 252) !important;
    font-weight: 700 !important;
  }
}

/* REGRAS ESPECIAIS PARA BOTÕES ROXOS */
button[class*="bg-purple"],
.magic-link-button,
.purple-button {
  color: rgb(255 255 255) !important;
  background-color: rgb(147 51 234) !important;
  font-weight: 700 !important;
}

button[class*="bg-purple"]:hover,
.magic-link-button:hover,
.purple-button:hover {
  color: rgb(255 255 255) !important;
  background-color: rgb(126 34 206) !important;
  font-weight: 700 !important;
}

button[class*="bg-purple"]:active,
.magic-link-button:active,
.purple-button:active {
  color: rgb(255 255 255) !important;
  background-color: rgb(107 33 168) !important;
  font-weight: 700 !important;
}

button[class*="bg-purple"]:focus,
.magic-link-button:focus,
.purple-button:focus {
  color: rgb(255 255 255) !important;
  background-color: rgb(147 51 234) !important;
  font-weight: 700 !important;
}

button[class*="bg-purple"]:disabled,
.magic-link-button:disabled,
.purple-button:disabled {
  color: rgb(255 255 255) !important;
  background-color: rgb(147 51 234) !important;
  font-weight: 700 !important;
  opacity: 0.6 !important;
}

/* Interceptar estilos inline problemáticos */
*[style*="color: white"] {
  color: rgb(31 41 55) !important;
  font-weight: 700 !important;
}

.dark *[style*="color: white"] {
  color: rgb(248 250 252) !important;
  font-weight: 700 !important;
}

/* Interceptar qualquer elemento que possa estar invisível */
*[style*="color: #ffffff"],
*[style*="color: #fff"],
*[style*="color: rgb(255, 255, 255)"] {
  color: rgb(31 41 55) !important;
  font-weight: 700 !important;
}

.dark *[style*="color: #ffffff"],
.dark *[style*="color: #fff"],
.dark *[style*="color: rgb(255, 255, 255)"] {
  color: rgb(248 250 252) !important;
  font-weight: 700 !important;
}

/* INTERCEPTADOR ESPECIAL PARA BOTÕES EM BACKGROUNDS ESPECÍFICOS */
button[style*="background-color: rgb(147, 51, 234)"],
button[style*="background-color: rgb(126, 34, 206)"],
button[style*="background-color: rgb(107, 33, 168)"] {
  color: rgb(255 255 255) !important;
  font-weight: 700 !important;
}

/* REGRAS UNIVERSAIS PARA PREVENIR INVISIBILIDADE */
button:not([class*="variant-link"]):not([class*="variant-ghost"]):not([class*="variant-outline"]) {
  font-weight: 700 !important;
}

/* Garantir que nenhum botão tenha texto da mesma cor que o fundo */
button {
  text-shadow: none !important;
}

/* INTERCEPTADOR FINAL - qualquer coisa que possa estar invisível */
*:not(svg):not(path):not(g) {
  /* Aplicar apenas se não for um elemento SVG */
}

/* Regra específica para garantir que botões nunca sejam invisíveis */
button[disabled] {
  opacity: 0.6 !important;
}

button[disabled]:not([class*="variant-link"]) {
  font-weight: 700 !important;
}
